# ğŸš›ç¬¬å››ç«  å˜é‡ã€ä½œç”¨åŸŸã€å†…å­˜é—®é¢˜

------

## 1.åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹

åŸºæœ¬ç±»å‹ï¼š

-   å£°æ˜å˜é‡`=>`å¼€è¾Ÿä¸€æ®µæ ˆå†…å­˜ç©ºé—´ï¼ˆå£°æ˜å˜é‡å®é™…ä¸Šå°±æ˜¯å£°æ˜äº†æŸä¸ªå¯„å­˜å™¨ï¼‰
-   å€¼`=>`ç›´æ¥ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­
-   æ“ä½œ`=>`ç›´æ¥æ“ä½œå€¼ï¼Œå®é™…çš„å€¼

å¼•ç”¨ç±»å‹ï¼š

-   å£°æ˜å˜é‡`=>`å¼€è¾Ÿä¸€æ®µæ ˆå†…å­˜ç©ºé—´
-   å€¼`=>`ä¿å­˜çš„æ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œå½“å‰å¼•ç”¨ç±»å‹å€¼çš„å †å†…å­˜åœ°å€
-   æ“ä½œ`=>`æ“ä½œçš„æ˜¯å€¼æ‰€æŒ‡å‘çš„å†…å­˜ä½ç½®

![1541303825400](datatype.png)

### 1.1  å¤åˆ¶å˜é‡å€¼

-   åŸºæœ¬ç±»å‹

    ```javascript
    let a = 1
    // let b = aå¯ä»¥åˆ†æ­¥çœ‹æˆ
    //1.å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œç›¸å½“äºåœ¨æ ˆç©ºé—´å¼€è¾Ÿä¸€å—å†…å­˜
    let b;
    //2. å°†açš„å€¼æ”¾å…¥bæ‰€ä»£è¡¨çš„è¿™å—å†…å­˜
    b = a;
    ```

-   å¼•ç”¨ç±»å‹

    ```javascript
    let a = {name:'xxx'};
    // åˆ†æ­¥
    //1. å£°æ˜å˜é‡ï¼Œå¼€è¾Ÿå†…å­˜ç©ºé—´
    let b;
    // å°†açš„å€¼ï¼ˆå› ä¸ºæ˜¯å¼•ç”¨ç±»å‹æ‰€ä»¥è¿™é‡Œçš„å€¼ä»£è¡¨çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼‰
    // æŠŠå€¼ï¼ˆå†…å­˜åœ°å€ï¼‰æ”¾å…¥bæ‰€ä»£è¡¨çš„å†…å­˜
    b = a;
    ```

ä»å¤åˆ¶å˜é‡å€¼å¯ä»¥çœ‹åˆ°ï¼ŒåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«åœ¨äºï¼Œ**åŸºæœ¬ç±»å‹**å¤åˆ¶çš„å°±æ˜¯å®å®åœ¨åœ¨çš„å€¼ï¼Œè€Œ**å¼•ç”¨ç±»å‹**å¤åˆ¶çš„æ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ã€‚è¿™æ˜¯å› ä¸º`JS`ä¸èƒ½ç›´æ¥æ“ä½œå†…å­˜ï¼Œä¸ºäº†å®‰å…¨è€ƒè™‘ã€‚

==æ³¨æ„==ï¼š

å¼•ç”¨ç±»å‹å¤åˆ¶æ—¶ï¼Œä¸¤ä¸ªå˜é‡è™½ç„¶æŒ‡å‘åŒä¸€ä¸ªåœ°å€ï¼Œä½†æ˜¯ç”±äºä¸¤ä¸ªå˜é‡æœ¬èº«å­˜åœ¨äºä¸åŒæ ˆç©ºé—´é‡Œï¼Œæ‰€ä»¥ä¿®æ”¹ä¸€ä¸ªå˜é‡çš„æŒ‡å‘ä¸ä¼šå½±å“å¦å¤–ä¸€ä¸ªã€‚

```javascript
function setName(obj) { // å‡½æ•°è°ƒç”¨æ—¶ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªå˜é‡obj
  obj.name = "Nicholas"; 
  obj = new Object(); // æŒ‡å‘ä¸€ä¸ªæ–°çš„åœ°å€
  obj.name = "Greg"; 
} 
var person = new Object(); 
setName(person); 
alert(person.name); //"Nicholas" // ä½†æ˜¯å¹¶æ²¡æœ‰æ”¹å˜åŸæ¥å¯¹è±¡çš„æŒ‡å‘
```



### 1.2 ä¼ é€’å‚æ•°

å‡½æ•°ä¼ å‚ ç­‰äº å˜é‡å¤åˆ¶


å‡½æ•°çš„å‚æ•°ä¼ é€’ï¼Œå®é™…ä¸Šå°±æ˜¯å°†å®å‚çš„å€¼==å¤åˆ¶ç»™`arguments`å¯¹è±¡ä¸­çš„å…ƒç´ ==	

å¯ä»¥æŠŠå‡½æ•°çš„å‚æ•°çœ‹æˆæ˜¯å±€éƒ¨å˜é‡ï¼Œè¿è¡Œå®Œæˆåå°±è¢«é”€æ¯äº†ï¼Œé™¤é`return`


### 1.3 æ£€æµ‹ç±»å‹

`typeof`å¯¹äº==å¼•ç”¨ç±»å‹çš„å€¼==åˆ¤æ–­åªä¼šè¿”å›`object`ï¼Œå› ä¸ºæ‰€æœ‰å¼•ç”¨ç±»å‹çš„å€¼éƒ½æ˜¯`Object`çš„å®ä¾‹ã€‚

ä½¿ç”¨`instanceof`


```javascript
alert(person instanceof Object); // å˜é‡ person æ˜¯ Object å—ï¼Ÿ
alert(colors instanceof Array); // å˜é‡ colors æ˜¯ Array å—ï¼Ÿ
alert(pattern instanceof RegExp); // å˜é‡ pattern æ˜¯ RegExp å—ï¼Ÿ
```

## 2. æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ

### 2.1 æ‰§è¡Œç¯å¢ƒ


åˆ†ä¸º`å…¨å±€æ‰§è¡Œç¯å¢ƒ`å’Œ`å±€éƒ¨æ‰§è¡Œç¯å¢ƒ`

æ‰§è¡Œä¸Šä¸‹æ–‡(`context`)ï¼Œå…¨å±€ä½œç”¨åŸŸï¼Œæ¯ä¸ªå‡½æ•°ä¹Ÿæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œæ¯ä¸ªä½œç”¨åŸŸå¯ä»¥è®¿é—®çš„å˜é‡ã€æ•°æ®åŒ…æ‹¬è‡ªå·±çš„ä½œç”¨åŸŸå’Œå®ƒçˆ¶çº§ã€çˆ¶çº§çš„çˆ¶çº§...çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®éƒ½å­˜å‚¨åœ¨ä¸€ä¸ª`å˜é‡å¯¹è±¡`é‡Œã€‚


```javascript
var color = "blue"; 
function changeColor(){ 
 var anotherColor = "red"; 
 	function swapColors(){ 
 		var tempColor = anotherColor; 
 		anotherColor = color; 
 		color = tempColor; 
 
 		// è¿™é‡Œå¯ä»¥è®¿é—® colorã€anotherColor å’Œ tempColor 
 	} 
 // è¿™é‡Œå¯ä»¥è®¿é—® color å’Œ anotherColorï¼Œä½†ä¸èƒ½è®¿é—® tempColor 
 swapColors(); 
} 
// è¿™é‡Œåªèƒ½è®¿é—® color 
```

### 2.2 å»¶é•¿ä½œç”¨åŸŸé“¾

`try-catch`å’Œ`with`ä¼šä¸´æ—¶æ·»åŠ å˜é‡å¯¹è±¡åœ¨å‰ç«¯

```javascript
function buildUrl() { 
 	var qs = "?debug=true"; 
 		with(location){ 
 			var url = href + qs; 
 		} 
 	return url; 
} 
// å¯ä»¥è¿™ä¹ˆæƒ³ï¼Œ withä¸æ˜¯functionæ‰€ä»¥ä¸ç®—å±€éƒ¨ä½œç”¨åŸŸï¼Œå› æ­¤èƒ½urlè¢«è®¿é—®åˆ°
```

### 2.3  å˜é‡å£°æ˜

æœªä½¿ç”¨`var`ç­‰å­—ç¬¦å£°æ˜çš„å˜é‡ï¼Œé»˜è®¤ä¸ºå…¨å±€å˜é‡

### 2.3  æŸ¥è¯¢æ ‡è¯†ç¬¦

```javascript
var color = "blue"; 
function getColor(){ 
 var color = "red"; 
 return color; 
} 
alert(getColor()); //"red" 
// è¿™é‡Œæƒ³è¦åœ¨å‡½æ•°å†…éƒ¨è®¿é—®å…¨å±€å˜é‡coloræ˜¯ä¸å¯èƒ½çš„
// æœç´¢æ ‡è¯†ç¬¦çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯æœç´¢å®šä¹‰çš„æ—¶å€™æ˜¯ä»è‡ªå·±çš„ä½œç”¨åŸŸå¼€å§‹å‘ä¸Šæœç´¢
// è€Œè‡ªå·±çš„ä½œç”¨åŸŸé‡Œé¢æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥åªæœ‰è¿™ä¸ªå±€éƒ¨å˜é‡coloræœ‰æ•ˆ
// æƒ³è¦åœ¨å‡½æ•°é‡Œé¢è®¿é—®åˆ°å…¨å±€å˜é‡ï¼Œä½¿ç”¨window.colorï¼Œå› ä¸ºwindowæ˜¯å…¨å±€ä½œç”¨åŸŸçš„å®šçº§å¯¹è±¡
// åªæœ‰ä½¿ç”¨varå®šä¹‰çš„å˜é‡æ‰èƒ½è¢«windowè®¿é—®ï¼Œletå®šä¹‰çš„ä¸è¡Œ
```

## 3. åƒåœ¾æ”¶é›†

jsæ‹¥æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼ŒæŒ‰ç…§ä¸€å®šé—´éš”æ‰¾å‡ºä¸å†ä½¿ç”¨çš„å˜é‡å¹¶é‡Šæ”¾å…¶å†…å­˜ã€‚

æ²¡ç”¨çš„å˜é‡ä¼šè¢«æ‰“ä¸Šæ ‡è®°ï¼Œæœ‰ä¸¤ç§å®ç°ç­–ç•¥

-   æ ‡è®°æ¸…é™¤

    åœ¨å˜é‡è¿›å…¥ç¯å¢ƒå’Œç¦»å¼€ç¯å¢ƒæ—¶åˆ†åˆ«åšæ ‡è®°ï¼Œå¦‚`åè½¬æŸä¸€ä½`ã€‚

    å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ˜¯æ ‡è®°æ¸…é™¤

-   å¼•ç”¨è®¡æ•°

    å½“å£°æ˜äº†ä¸€ä¸ªå˜é‡å¹¶å°†ä¸€ä¸ªå¼•ç”¨ç±»å‹å€¼èµ‹ç»™è¯¥å˜é‡æ—¶ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å°±æ˜¯ 1ã€‚å¦‚æœåŒä¸€ä¸ªå€¼åˆè¢«èµ‹ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œåˆ™è¯¥å€¼çš„å¼•ç”¨æ¬¡æ•°åŠ  1ã€‚ç›¸åï¼Œå¦‚æœåŒ…å«å¯¹è¿™ä¸ªå€¼å¼•ç”¨çš„å˜é‡åˆå–å¾—äº†å¦å¤–ä¸€ä¸ªå€¼ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å‡ 1ã€‚å½“è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å˜æˆ 0 æ—¶ï¼Œåˆ™è¯´æ˜æ²¡æœ‰åŠæ³•å†è®¿é—®è¿™ä¸ªå€¼äº†ï¼Œå› è€Œå°±å¯ä»¥å°†å…¶å ç”¨çš„å†…å­˜ç©ºé—´å›æ”¶å›æ¥

>   `BOM`å’Œ`DOM`ï¼Œæ˜¯ä½¿ç”¨`C++`çš„`COMï¼ˆComponent Object Modelï¼Œç»„ä»¶å¯¹è±¡æ¨¡å‹ï¼‰`å¯¹è±¡çš„å½¢å¼å®ç°çš„ï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„å›æ”¶æœºåˆ¶å°±æ˜¯ä½¿ç”¨çš„å¼•ç”¨è®¡æ•°
>
>   ==æ‰€ä»¥==å½“å¾ªç¯å¼•ç”¨æ—¶å°±ä¸èƒ½é‡Šæ”¾å†…å­˜

-   æ€§èƒ½é—®é¢˜

    `IE`æ—©æœŸç­–ç•¥æ˜¯è¾¾åˆ°å›ºå®šä¸´ç•Œå€¼æ‰è§¦å‘åƒåœ¾æ”¶é›†ï¼Œå½“æœ‰ç¨‹åºä¸€ç›´è¶…è¿‡ä¸´ç•Œå€¼ï¼Œåƒåœ¾å›æ”¶å°±å¿…é¡»ä¸€ç›´è¿è¡Œï¼Œä¸¥é‡å½±å“çš„æ€§èƒ½ã€‚

-   ç®¡ç†å†…å­˜

    `è§£é™¤å¼•ç”¨`ï¼šä¸€ä¸ªæ•°æ®ä¸å†ä½¿ç”¨ï¼Œæ‰‹åŠ¨èµ‹å€¼`null`é‡Šæ”¾å¼•ç”¨

    ```javascript
    function createPerson(name){ 
     	var localPerson = new Object(); 
     	localPerson.name = name; 
     	return localPerson; 
    } 
    var globalPerson = createPerson("Nicholas"); 
    // æ‰‹å·¥è§£é™¤ globalPerson çš„å¼•ç”¨
    globalPerson = null; 
    ```

------

# ğŸ¤¹â€â™‚ç¬¬å…­ç«    é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡

------

ä¼ ç»Ÿé¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œéƒ½æ‹¥æœ‰`ç±»`çš„æ¦‚å¿µ`ç±» >>> å¯¹è±¡ >>>  å®ä¾‹`ï¼Œè€Œ`js`æ²¡æœ‰ã€‚`ECMA`æŠŠå¯¹è±¡å®šä¹‰ä¸ºä¸€ä¸ªåŒ…å«ä»»æ„æ•°æ®ç±»å‹çš„æ— åºé›†åˆã€‚

## 1.å±æ€§ç±»å‹

å¯¹è±¡çš„å±æ€§å€¼æ‹¥æœ‰ä¸¤ç§å±æ€§ç±»å‹ã€‚ä¸èƒ½è®¿é—®çš„å†…éƒ¨å€¼ç”¨`[[ ]]`è¡¨ç¤º

### 1. 1 æ•°æ®å±æ€§ï¼š

é’ˆå¯¹å¯¹è±¡å±æ€§æ¥è¯´çš„ï¼ŒåŒ…å«å››ä¸ªç‰¹æ€§

-   `[[configurable]]`ï¼šå¯å®šä¹‰æ€§ï¼Œ1.èƒ½å¦é€šè¿‡`delete`åˆ é™¤è¯¥å±æ€§ 2. èƒ½å¦ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§
-   `[[writable]]`ï¼šå¯å†™æ€§ï¼Œ1. èƒ½å¦ä¿®æ”¹å±æ€§å€¼
-   `[[enumerable]]`ï¼šå¯æšä¸¾æ€§ï¼Œ2. èƒ½å¦é€šè¿‡for-inè¿”å›key
-   `[[value]]`ï¼šè¯¥å±æ€§åŒ…å«çš„å€¼

```javascript
let a = {
    name:'xxx'
};
Object.getOwnPropertyDescriptor(a, 'name')
// ä½¿ç”¨objectå†…ç½®æ–¹æ³•getOwnPropertyDescriptorï¼Œè·å–æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§çš„æ•°æ®å±æ€§
```

```javascript
// configurable
delete a.name
console.log(a.name) ====> undefined
// writable
a.name = 'OOO';
console.log(a.name) ====> OOO
// enumerable
for(i in a) ====> "name"
// value
```

#### 1 ä¿®æ”¹æ•°æ®å±æ€§çš„æ–¹æ³•

`Object.defineProperty()`ï¼šè¢«ä¿®æ”¹çš„å±æ€§æ‰€åœ¨çš„å¯¹è±¡ï¼Œå±æ€§åï¼Œä¸€ä¸ªæè¿°ç¬¦å¯¹è±¡

å¦‚æœæ²¡æœ‰æŒ‡å®šæŸäº›æ•°æ®å±æ€§ï¼Œé»˜è®¤ä¸º`false`

å¦‚æœè®¾ç½®`configurable`ä¸º`false`ä¼šå¯¼è‡´ä¸‹æ¬¡é‡æ–°è®¾ç½®å¤±è´¥

```javascript
Object.defineProperty(person,'job',{
    emumerable:false,//ä¸å¯æšä¸¾   ======> for-inæ‰§è¡Œåˆ°jobå±æ€§æ—¶ä¼šæŠ¥é”™
    value:'singer',
    writable:false,//ä¸å¯å†™  =====> a.job="xx" ä¼šæŠ¥é”™
    configurable:true
});
```

### 1.2è®¿é—®å™¨ / å­˜å‚¨å™¨å±æ€§

è¿™ä¸ªå±æ€§æ²¡æœ‰åŒ…å«æ•°æ®å€¼ï¼ŒåŒ…å«çš„æ˜¯get / setæ–¹æ³•ã€‚

è®¿é—®æ—¶è§¦å‘`get`ï¼Œä¿®æ”¹æ—¶è§¦å‘`set`

åŒæ ·æ‹¥æœ‰å››ä¸ªç‰¹æ€§ï¼š

-   `[[configurable]]`ï¼šå¯å®šä¹‰æ€§ï¼Œ 1. èƒ½å¦è¢«`delete`åˆ é™¤ 2. èƒ½å¦ä¿®æ”¹ç‰¹æ€§
-   `[[enumerable]]`ï¼šæšä¸¾æ€§ï¼Œ 1. èƒ½å¦è¢«for-inéå†åˆ°keyå€¼
-   `[[Get]]`ï¼šåœ¨è¯»å–å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°ï¼ŒåªæŒ‡å®šgetä»£è¡¨æ­¤å±æ€§é»˜è®¤ä¸ºåªè¯»
-   `[[Set]]`ï¼šåœ¨å†™å…¥æ—¶è°ƒç”¨çš„å‡½æ•°

==è®¿é—®å™¨å±æ€§==ä¸èƒ½ç›´æ¥å®šä¹‰ï¼Œåªèƒ½é€šè¿‡`Object.defineProperty()`å®šä¹‰ã€‚

```javascript
let a = {
    _name: 'XXX',// å¿…é¡»ä¹¦å†™ä¸‹åˆ’çº¿ è¡¨ç¤ºæ˜¯å†…éƒ¨å±æ€§åªèƒ½é€šè¿‡ å¯¹è±¡çš„æ–¹æ³• æ¥è¯»å†™
    age: 12
}
// å°†å±æ€§_nameå®šä¹‰ä¸ºè®¿é—®å™¨å±æ€§
Object.defineProperty(a, 'name', {
    get() {
        return this._name
    },
    set(newName) { // setä¼ å…¥ä¸€ä¸ªå‚æ•° å³æ–°å€¼
        if(newName !== this._name) {
            this._name = newName;
        }
    }
})
// ç¬¬äºŒç§å®šä¹‰æ–¹æ³•
let a = {
    age:12,
    get _name() {
        return this._name
    }
    set _name(newName) {
    	if(newName !== this._name) {
            this._name = newName;
        }
	}
}
```

### 1.3 ä½¿ç”¨æƒ…å†µ

-   éœ€è¦è®¾ç½®ä¸€ä¸ªå±æ€§çš„åŒæ—¶è¦æ”¹å˜å…¶ä»–å±æ€§å€¼
-   ç›‘å¬æ•°æ®å˜åŒ–ï¼Œç±»ä¼¼`vue`

### 1.4 å®šä¹‰å¤šä¸ªå±æ€§

`Object.defineProperties()`

```javascript
var book = {}; 
Object.defineProperties(book, { 
     _year: { 
     	value: 2004 
     }, 
 
     edition: { 
     	value: 1 
     }, 
     year: { 
     	get: function(){ 
            return this._year; 
 		}, 
 		set: function(newValue){ 
 			if (newValue > 2004) { 
 				this._year = newValue; 
 				this.edition += newValue - 2004; 
 			} 
 		} 
 	}	 
}); 
```

## 2. åˆ›å»ºå¯¹è±¡

ä½¿ç”¨`Object`æ„é€ å‡½æ•°æˆ–è€…å­—é¢é‡åˆ›å»ºå¯¹è±¡==ç¼ºç‚¹==

-   åˆ›å»ºä¸€ä¸ªå±æ€§æ–¹æ³•ç›¸ä¼¼çš„å¯¹è±¡ä¼šäº§ç”Ÿå¤§é‡é‡å¤ä»£ç 

### 2.1  å·¥å‚æ¨¡å¼

-   æ¯æ¬¡éƒ½å®ä¾‹ä¸€ä¸ª`Object`
-   åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯æ‹¥æœ‰ç›¸åŒå±æ€§çš„ï¼Œåªæ˜¯å€¼ä¸åŒ

```javascript
function createPerson(name, age, job){ 
     var o = new Object(); 
     o.name = name; 
     o.age = age; 
     o.job = job; 
     o.sayName = function(){ 
        alert(this.name); 
     }; 
     return o; 
} 
// æ³¨æ„è¿™é‡Œæ²¡æœ‰ä½¿ç”¨newæ“ä½œç¬¦
var person1 = createPerson("Nicholas", 29, "Software Engineer"); 
```

==ç¼ºç‚¹==ï¼šå¦‚ä¸Šè¿°ä¾‹å­ï¼Œæ‰€æœ‰å¯¹è±¡çš„ç±»å‹éƒ½æ˜¯`Object`ï¼Œä¸èƒ½å®ç°åŒºåˆ†

### 2.2 æ„é€ å‡½æ•°æ¨¡å¼

-   æ²¡æœ‰æ˜¾ç¤ºåœ°åˆ›å»ºå¯¹è±¡

-   å±æ€§å’Œæ–¹æ³•ç»™äº†`this`å¯¹è±¡

-   æ²¡æœ‰`return`

    è¿™æ ·åˆ›å»ºçš„å¯¹è±¡æ—¢æ˜¯`Object`çš„å®ä¾‹ä¹Ÿæ˜¯`Person`çš„å®ä¾‹ï¼Œå®ç°äº†åŒºåˆ†ä¸åŒç±»å‹çš„å¯¹è±¡

```javascript
function Person(name, age, job){ 
     this.name = name; 
     this.age = age; 
     this.job = job; 
     this.sayName = function(){ 
        alert(this.name); 
     }; 
} 
var person1 = new Person("Nicholas", 29, "Software Engineer"); 
var person2 = new Person("Greg", 27, "Doctor"); 
```

`new`è¿‡ç¨‹ï¼š

1.  åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡
2.  `this`æŒ‡å‘æ–°å¯¹è±¡
3.  æ‰§è¡Œæ„é€ å‡½æ•°ä»£ç ï¼Œç»™æ–°å¯¹è±¡æ·»åŠ å±æ€§
4.  è¿”å›æ–°å¯¹è±¡

#### 1. æ„é€ å‡½æ•°å½“åšå‡½æ•°

```
æ„é€ å‡½æ•°å’Œæ™®é€šå‡½æ•°çš„åŒºåˆ«åªæ˜¯è°ƒç”¨æ–¹æ³•ä¸åŒã€‚

```

```javascript
// å½“ä½œæ„é€ å‡½æ•°ä½¿ç”¨
var person = new Person("Nicholas", 29, "Software Engineer"); 
person.sayName(); //"Nicholas" 

// ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨
Person("Greg", 27, "Doctor"); // æ·»åŠ åˆ° window 
window.sayName(); //"Greg" 


// åœ¨å¦ä¸€ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸä¸­è°ƒç”¨
// è¿™ä¸ªä¾‹å­ç›¸å½“äºnewçš„æ‰§è¡Œæ­¥éª¤
var o = new Object(); 
Person.call(o, "Kristen", 25, "Nurse"); 
o.sayName(); //"Kristen" 
```

#### 2. æ„é€ å‡½æ•°çš„é—®é¢˜

==ç¼ºç‚¹==ï¼šå¯¹äºæ–¹æ³•ï¼Œå› ä¸ºå‡½æ•°æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥æ¯æ¬¡`new`ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œé‡Œé¢çš„æ–¹æ³•ä¹Ÿä¼šå®ä¾‹ä¸€æ¬¡ï¼Œå¯¹äºæ‰§è¡ŒåŒæ ·åŠŸèƒ½çš„å‡½æ•°ï¼Œå¤šæ¬¡å®ä¾‹åŒ–æ²¡æœ‰å¿…è¦ã€‚

å°†å‡½æ•°å£°æ˜ï¼ˆå®ä¾‹å‡½æ•°å¯¹è±¡ï¼‰æ”¾åœ¨æ„é€ å‡½æ•°å¤–ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜

```javascript
function Person(name, age, job){ 
     this.name = name; 
     this.age = age; 
     this.job = job; 
     this.sayName = sayName; 
} 
function sayName(){ 
     alert(this.name); 
} 
var person1 = new Person("Nicholas", 29, "Software Engineer"); 
var person2 = new Person("Greg", 27, "Doctor"); 
```

==ç¼ºç‚¹==ï¼šè¡¨é¢çœ‹è¿™ä¸ªå‡½æ•°æ˜¯å…¨å±€çš„ï¼Œä½†æ˜¯åªèƒ½ç”±æŸä¸ªå¯¹è±¡è°ƒç”¨ï¼Œå†™åœ¨æ„é€ å‡½æ•°å¤–æ¯«æ— å°è£…æ€§ã€‚

### 2.3 åŸå‹æ¨¡å¼

```
æ¯ä¸ª**å‡½æ•°**éƒ½æœ‰ä¸€ä¸ª`prototype`å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ª`æŒ‡é’ˆ`ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡ï¼Œ**åŸå‹å¯¹è±¡**åŒ…å«å®ä¾‹æ‰€å…±äº«çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚

```

```javascript
function Person(){ 
} 
Person.prototype.name = "Nicholas"; 
Person.prototype.age = 29; 
Person.prototype.job = "Software Engineer"; 
Person.prototype.sayName = function(){ 
 alert(this.name); 
}; 
var person1 = new Person(); 
person1.sayName(); //"Nicholas" 
var person2 = new Person(); 
person2.sayName(); //"Nicholas" 
alert(person1.sayName == person2.sayName); //true 
```

#### 1. ç†è§£åŸå‹å¯¹è±¡

1.  åªè¦åˆ›å»ºäº†å‡½æ•°ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª`prototype`å±æ€§

2.  `prototype`é»˜è®¤ä¼šæ‹¥æœ‰ä¸€ä¸ª`constructor`å±æ€§

3.  `prototype`å±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘`åŸå‹å¯¹è±¡`ã€‚

4.  `constructor`å±æ€§ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘åŒ…å«`prototype`å±æ€§çš„å‡½æ•°ã€‚

5.  æ¯ä¸ªå®ä¾‹æœ‰ä¸€ä¸ªæ— æ³•è¢«è®¿é—®çš„å±æ€§`[[prototype]]`ï¼Œæµè§ˆå™¨é‡Œæ˜¾ç¤ºä¸º`_proto_`æˆ–è€…`<prototype>`ï¼Œè¿™ä¸ªå±æ€§ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘`åŸå‹å¯¹è±¡`ï¼Œä¸æ˜¯æ„é€ å‡½æ•°ã€‚

    ![](E:\åŸ¹è®­\ç¬”è®°å›¾\åŸå‹å¯¹è±¡.png)

```javascript
// é€šè¿‡isPrototypeOfæ£€æŸ¥ [[prototype]]å’ŒåŸå‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»
alert(Person.prototype.isPrototypeOf(person1)); //true 
alert(Person.prototype.isPrototypeOf(person2)); //true 
// é€šè¿‡getPrototypeOf å¾—åˆ°[[prototype]]å€¼
alert(Object.getPrototypeOf(person1) == Person.prototype); //true 
alert(Object.getPrototypeOf(person1).name); //"Nicholas" 
```

å½“ä»£ç è¯»å–æŸä¸€ä¸ªå±æ€§æ—¶ï¼Œå…ˆæ£€æŸ¥è‡ªèº«æœ‰æ— æ­¤å±æ€§ï¼Œç„¶åå†æ£€æŸ¥åŸå‹ï¼Œä¾æ¬¡å‘ä¸ŠæŸ¥æ‰¾ã€‚

```javascript
function Person(){ 
} 
Person.prototype.name = "Nicholas"; 
Person.prototype.age = 29; 
Person.prototype.job = "Software Engineer"; 
Person.prototype.sayName = function(){ 
  alert(this.name); 
}; 
var person1 = new Person(); 
var person2 = new Person(); 
person1.name = "Greg"; 
alert(person1.name); //"Greg"â€”â€”æ¥è‡ªå®ä¾‹
alert(person2.name); //"Nicholas"â€”â€”æ¥è‡ªåŸå‹
// å› ä¸ºperson1è‡ªèº«å·²ç»å¯ä»¥æ‰¾åˆ°nameè¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥å°±ä¸ä¼šå†å¾€ä¸ŠæŸ¥æ‰¾äº†
```

å°±ç®—å°†å®ä¾‹é‡Œé¢è®¾ç½®çš„å±æ€§å€¼è®¾ç½®ä¸º`null`ä¹Ÿä¸èƒ½å›å¤è®¿é—®åŸå‹çš„å±æ€§ï¼Œåªèƒ½é€šè¿‡`delete`åˆ é™¤å±æ€§æ‰èƒ½æ¢å¤ä¸åŸå‹çš„è¿æ¥ã€‚

```javascript
// hasOwnPropertyåªè¿”å›å®ä¾‹å±æ€§ ä¸è¿”å›åŸå‹å±æ€§
alert(person1.hasOwnProperty("name")); //false 
alert(person1.name); //"Greg"â€”â€”æ¥è‡ªå®ä¾‹
alert(person1.hasOwnProperty("name")); //true 
```

#### 2. åŸå‹ä¸inæ“ä½œç¬¦

```javascript
// æ— è®ºæ¥è‡ªå®ä¾‹è¿˜æ˜¯åŸå‹éƒ½ä¼šè¿”å›true
person1.name = "Greg"; 
alert(person1.name); //"Greg" â€”â€”æ¥è‡ªå®ä¾‹
alert(person1.hasOwnProperty("name")); //true 
alert("name" in person1); //true 
alert(person2.name); //"Nicholas" â€”â€”æ¥è‡ªåŸå‹
alert(person2.hasOwnProperty("name")); //false 
alert("name" in person2); //true 
delete person1.name; 
alert(person1.name); //"Nicholas" â€”â€”æ¥è‡ªåŸå‹
alert(person1.hasOwnProperty("name")); //false 
lert("name" in erson1) //true 
// hasPrototypePropertyåªæœ‰æ¥è‡ªåŸå‹çš„å±æ€§æ‰ä¼šè¿”å›true
var person = new Person(); 
alert(hasPrototypeProperty(person, "name")); //true 
person.name = "Greg"; 
alert(hasPrototypeProperty(person, "name")); //false 
// for-in
è¿”å›æ‰€æœ‰å¯æšä¸¾çš„å±æ€§ï¼ˆä½†æ˜¯å¼€å‘äººå‘˜è‡ªå·±å±è”½æšä¸¾çš„å±æ€§ä»ç„¶å¯ä»¥è¢«å¾ªç¯ï¼‰ï¼Œæ— è®ºåœ¨åŸå‹è¿˜æ˜¯å®ä¾‹é‡Œé¢
// Object.keys() è¿”å›å¯¹è±¡ä¸Šçš„æ‰€æœ‰å¯æšä¸¾å±æ€§
//Object.getOwnPropertyNames() æ— è®ºå¯å¦è¢«æšä¸¾éƒ½èƒ½è¿”å›
```

#### 3. æ›´ç®€æ´çš„åŸå‹è¯­æ³•

```javascript
function Person(){ 
} 
// å°†åŸå‹å¯¹è±¡ç›´æ¥é‡å†™
Person.prototype = { 
    name : "Nicholas", 
    age : 29, 
    job: "Software Engineer", 
    sayName : function () { 
        alert(this.name); 
    } 
}; 
// é€šè¿‡å­—é¢é‡åˆ›å»ºå¯¹è±¡ ç›¸å½“äºnew Object()
// è¿™æ ·åŸå‹å¯¹è±¡æˆä¸ºäº†Objectçš„ä¸€ä¸ªå®ä¾‹
// è€ŒprototypeæŒ‡å‘äº†åŸå‹å¯¹è±¡(ä¸€ä¸ªObjectçš„å®ä¾‹)
// åŒ…å«prototypeå±æ€§çš„å‡½æ•°å˜æˆäº†Objectçš„æ„é€ å‡½æ•°
// ç›¸å½“äºè·Ÿç€åŸå‹å¯¹è±¡èµ°
// constructor æŒ‡å‘äº†åŒ…å«prototypeå±æ€§çš„å‡½æ•°

var friend = new Person(); 
alert(friend instanceof Object); //true 
alert(friend instanceof Person); //true 
alert(friend.constructor == Person); //false 
alert(friend.constructor == Object); //true 

// å¯ä»¥å•ç‹¬è®¾ç½®constructorå±æ€§
function Person(){ 
} 
Person.prototype = { 
  constructor : Person, 
  name : "Nicholas", 
  age : 29, 
  job: "Software Engineer", 
  sayName : function () { 
  alert(this.name); 
  } 
}; 
```

#### 4. åŸå‹çš„åŠ¨æ€æ€§

```javascript
var friend = new Person(); 
Person.prototype.sayHi = function(){ 
  alert("hi"); 
}; 
friend.sayHi(); //"hi"ï¼ˆæ²¡æœ‰é—®é¢˜ï¼ï¼‰

// è¿™æ ·å°±ä¼šæŠ¥é”™
function Person(){ 
} 
var friend = new Person(); 
// å®Œå…¨é‡å†™åŸå‹
Person.prototype = { 
  constructor: Person, 
  name : "Nicholas", 
  age : 29, 
  job : "Software Engineer", 
  sayName : function () { 
  	alert(this.name); 
  } 
}; 
friend.sayName(); //error 
```

1.  å®ä¾‹çš„`[[prototype]]`å±æ€§æŒ‡å‘åŸå‹å¯¹è±¡
2.  ==æ³¨æ„==`[[prototype]]`åªæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€å—å†…å­˜ï¼Œè€Œéå‰¯æœ¬
3.  æ‰€ä»¥ å½“å®Œå…¨é‡å†™åŸå‹çš„æ—¶å€™ï¼Œç›¸å½“äº`new Object()`ï¼Œç›¸å½“äºé‡æ–°å¼€è¾Ÿäº†ä¸€å—å†…å­˜ï¼Œæ‰€ä»¥åŸå§‹çš„`[[prototype]]`æŒ‡å‘çš„å†…å­˜ä½ç½®å°†ä¸å†æ­£ç¡®ã€‚
4.  æ‰€ä»¥æ£€æŸ¥åŸå‹é“¾çš„æ—¶å€™ï¼Œæ— æ³•æŸ¥æ‰¾åˆ°`syaName()`è¿™ä¸ªæ–¹æ³•ã€‚

#### 5. åŸç”Ÿå¯¹è±¡çš„åŸå‹

#### 6. åŸå‹å¯¹è±¡çš„é—®é¢˜

```
æ„é€ å‡½æ•°ä¸èƒ½ä¼ é€’å‚æ•°

æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯å…±äº«çš„

```

### 2.4 ç»„åˆæ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼

```javascript
function Person(name, age, job){ 
  this.name = name; 
  this.age = age; 
  this.job = job; 
  this.friends = ["Shelby", "Court"]; 
} 
Person.prototype = { 
  constructor : Person, 
  sayName : function(){ 
  	alert(this.name); 
  } 
} 
var person1 = new Person("Nicholas", 29, "Software Engineer"var person2 = new Person("Greg", 27, "Doctor"); 
person1.friends.push("Van"); 
alert(person1.friends); //"Shelby,Count,Van" 
alert(person2.friends); //"Shelby,Count" 
alert(person1.friends === person2.friends); //false 
alert(person1.sayName === person2.sayName); //true 
```

### 2.5 åŠ¨æ€åŸå‹æ¨¡å¼

```
å‰é¢è¯´è¿‡æ„é€ å‡½æ•°æ¨¡å¼æœ‰ä¸ªç¼ºç‚¹ï¼Œå®ä¾‹å¯¹è±¡çš„æ—¶å€™ï¼Œå…¶ä¸­çš„æ–¹æ³•æ¯æ¬¡éƒ½ä¼šå®ä¾‹ä¸€æ¬¡ï¼Œå› ä¸ºå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ã€‚

è¿™é‡Œå¢åŠ äº†ä¸€ä¸ªåˆ¤æ–­ï¼Œæ£€æŸ¥åŸå‹é‡Œé¢æœ‰æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œåªéœ€è¦æ£€æŸ¥ä¸€ä¸ªå°±è¡Œäº†ï¼Œå·²ç»æœ‰äº†å°±ä¸ç”¨å†å®ä¾‹è¿™ä¸ªå‡½æ•°äº†ã€‚

```

```javascript
function Person(name, age, job){ 
  //å±æ€§
  this.name = name; 
  this.age = age; 
  this.job = job;
  //æ–¹æ³•
  if (typeof this.sayName != "function"){ 
 	Person.prototype.sayName = function(){ 
        alert(this.name); 
	 }; 
   } 
} 
```

### 2.6 å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼

```javascript
function Person(name, age, job){ 
  var o = new Object(); 
  o.name = name; 
  o.age = age; 
  o.job = job; 
  o.sayName = function(){ 
  	alert(this.name); 
  }; 
  return o; 
} 
// å’Œå·¥å‚æ¨¡å¼å”¯ä¸€çš„ä¸åŒå°±æ˜¯ è¿™é‡Œä½¿ç”¨äº†newå®ä¾‹å¯¹è±¡
// æ‰€ä»¥Personå‡½æ•°ä¸å†å«åŒ…è£…å‡½æ•° å«æ„é€ å‡½æ•°
var friend = new Person("Nicholas", 29, "Software Engineer"); 
friend.sayName(); //"Nicholas" 
```

æ„é€ å‡½æ•°å¦‚æœä¸å†™è¿”å›å€¼ï¼Œé»˜è®¤åœ¨`new`ä¹‹åè¿”å›æ–°å¯¹è±¡çš„å®ä¾‹ã€‚è¿™é‡Œç›´æ¥è¿”å›æ–°å¯¹è±¡`o`ï¼Œé‡å†™è°ƒç”¨æ„é€ å‡½æ•°æ—¶çš„è¿”å›å€¼ã€‚

```javascript
// å¦‚æœç°åœ¨éœ€è¦åˆ›å»ºä¸€ä¸ªæœ‰ç‰¹æ®Šæ–¹æ³•çš„æ•°ç»„ï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥ä¿®æ”¹Arrayçš„æ„é€ å‡½æ•°
// 
function SpecialArray(){ 
  //åˆ›å»ºæ•°ç»„
  var values = new Array(); 
  //æ·»åŠ å€¼
  //pushåªèƒ½æ¥å—æ•°ç»„ä¸èƒ½æ¥å— argumentsç±»æ•°ç»„
  // [...arguments]ä¹Ÿå¯ä»¥
  values.push.apply(values, arguments); 
  //æ·»åŠ æ–¹æ³•
  values.toPipedString = function(){ 
  	return this.join("|"); 
  }; 
  //è¿”å›æ•°ç»„
  return values; 
} 
// å®ä¾‹äº†ä¸€ä¸ªç‰¹æ®Šçš„æ•°ç»„å¯¹è±¡
var colors = new SpecialArray("red", "blue", "green"); 
alert(colors.toPipedString()); //"red|blue|green" 
```

å¯„ç”Ÿæ„é€ å‡½æ•°å’Œå¯¹è±¡ä¹‹é—´æ²¡ä»€ä¹ˆå…³ç³»ã€‚

### 2.7 ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼

```
æ²¡æœ‰å…¬å…±å±æ€§ï¼Œä¹Ÿæ²¡æœ‰`this`å¯¹è±¡ï¼Œä¸ä½¿ç”¨`new`è°ƒç”¨æ„é€ å‡½æ•°

```

```javascript
function Person(name, age, job){ 
 	 //åˆ›å»ºè¦è¿”å›çš„å¯¹è±¡
  	var o = new Object(); 
  	//å¯ä»¥åœ¨è¿™é‡Œå®šä¹‰ç§æœ‰å˜é‡å’Œå‡½æ•°
 	//æ·»åŠ æ–¹æ³•
 	o.sayName = function(){ 
 		alert(name); 
 	}; 
 	//è¿”å›å¯¹è±¡
 	return o; 
} 
var friend = Person("Nicholas", 29, "Software Engineer"); 
friend.saName() //"Nicholas" 

// å±æ€§nameåªèƒ½ç”±saNameè°ƒç”¨
```

## 3.ç»§æ‰¿

ä¼ ç»ŸOOè¯­è¨€ä¸­æœ‰ä¸¤ç§ç»§æ‰¿æ–¹å¼ï¼Œ`æ¥å£ç»§æ‰¿`å’Œ`å®ç°ç»§æ‰¿`ï¼Œæ¥å£ç»§æ‰¿åªç»§æ‰¿å‡½æ•°ç­¾åï¼Œä¸€ä¸ªå¤–å£³ï¼Œè€Œå®ç°ç»§æ‰¿ï¼Œç»§æ‰¿å®é™…çš„æ–¹æ³•

è€Œ`JS`åªèƒ½é€šè¿‡åŸå‹é“¾è¿›è¡Œå®ç°ç»§æ‰¿

### 3.1 åŸå‹é“¾

```javascript
function SuperType(){ 
  this.property = true; 
} 
SuperType.prototype.getSuperValue = function(){ 
  return this.property; 
}; 
function SubType(){ 
  this.subproperty = false; 
} 
//ç»§æ‰¿äº† SuperType 
SubType.prototype = new SuperType(); 
SubType.prototype.getSubValue = function (){ 
  return this.subproperty; 
}; 
var instance = new SubType(); 
alert(instance.getSuperValue()); //true 
```

![1537079984563](E:\åŸ¹è®­\ç¬”è®°å›¾\åŸå‹é“¾.png)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå…³é”®åœ¨äºç¬¬`11`è¡Œä»£ç ï¼Œå­ç±»çš„åŸå‹å¯¹è±¡ï¼Œå®Œå…¨ç­‰äºçˆ¶ç±»çš„å®ä¾‹çš„åŸå‹ï¼Œè€Œå®ä¾‹(å­ç±»åŸå‹å¯¹è±¡)çš„`[[prototype]]`æŒ‡å‘äº†çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œå­ç±»çš„å®ä¾‹ä¸­çš„`[[prototype]]`åˆæŒ‡å‘å­ç±»çš„åŸå‹å¯¹è±¡ã€‚

å­ç±»çš„å®ä¾‹`[[prototype]]`  -----> å­ç±»çš„åŸå‹å¯¹è±¡ï¼Œçˆ¶ç±»çš„å®ä¾‹(å­ç±»)çš„åŸå‹ -----> çˆ¶ç±»çš„åŸå‹å¯¹è±¡

`getSuperValue() `æ–¹æ³•ä»ç„¶è¿˜åœ¨`SuperType.prototype `ä¸­ï¼Œä½† `property `åˆ™ä½äº `SubType.prototype `ä¸­ã€‚è¿™æ˜¯å› ä¸º `property `æ˜¯ä¸€ä¸ª**å®ä¾‹å±æ€§**ï¼Œè€Œ `getSuperValue()`åˆ™æ˜¯ä¸€ä¸ª**åŸå‹æ–¹æ³•**ã€‚æ—¢ç„¶ `SubType.prototype `ç°åœ¨æ˜¯ `SuperType`çš„å®ä¾‹ï¼Œé‚£ä¹ˆ `property `å½“ç„¶å°±ä½äºè¯¥å®ä¾‹ä¸­äº†ã€‚

æ­¤å¤–ï¼Œè¦æ³¨æ„ `instance.constructor` ç°åœ¨æŒ‡å‘çš„æ˜¯ `SuperType`ï¼Œè¿™æ˜¯å› ä¸º `instance`çš„`[[prototype]]`æŒ‡å‘å­ç±»çš„åŸå‹å¯¹è±¡ï¼Œè€ŒåŸå‹å¯¹è±¡ï¼ˆçˆ¶ç±»çš„å®ä¾‹ï¼‰çš„`[[prototype]]`æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œæœ€ååœ¨çˆ¶ç±»çš„åŸå‹å¯¹è±¡ä¸­æ‰¾åˆ°`constructor`å±æ€§ï¼ŒæŒ‡å‘çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚

#### 1.é»˜è®¤åŸå‹

```
æ‰€æœ‰å‡½æ•°éƒ½æ˜¯`Object`çš„å®ä¾‹ï¼Œéƒ½ç»§æ‰¿äº†`Object`ã€‚

```

![1537082733872](E:\åŸ¹è®­\ç¬”è®°å›¾\æ•´ä¸ªåŸå‹é“¾.png)

#### 2. ç¡®å®šåŸå‹å’Œå®ä¾‹çš„å…³ç³»

`instanceof`  `isPrototype()`

```javascript
alert(instance instanceof Object); //true 
alert(instance instanceof SuperType); //true 
alert(instance instanceof SubType); //true 
alert(Object.prototype.isPrototypeOf(instance)); //true 
alert(SuperType.prototype.isPrototypeOf(instance)); //true 
alert(SubType.prototype.isPrototypeOf(instance)); //true 
```

#### 3.è°¨æ…å®šä¹‰æ–¹æ³•

å®šä¹‰æ–°æ–¹æ³•å’Œé‡å†™è¶…ç±»æ–¹æ³•è¦åœ¨æ›¿æ¢åŸå‹è¯­å¥ï¼ˆä¸‹æ–¹ä»£ç ç¬¬äºŒè¡Œï¼‰ä¹‹å

```javascript
//ç»§æ‰¿äº† SuperType 
SubType.prototype = new SuperType(); 
//æ·»åŠ æ–°æ–¹æ³•
SubType.prototype.getSubValue = function (){ 
  return this.subproperty; 
}; 
//é‡å†™è¶…ç±»å‹ä¸­çš„æ–¹æ³•
// å®é™…ä¸Šå°±æ˜¯åœ¨å­ç±»é‡Œé¢å†™ä¸€ä¸ªå’Œè¶…ç±»åå­—ä¸€æ ·çš„æ–¹æ³•
// å› ä¸ºåŸå‹é“¾æŸ¥æ‰¾çš„å…³ç³»ï¼Œåœ¨å­ç±»é‡Œé¢æŸ¥æ‰¾åˆ°äº†å°±ä¸ä¼šå†å¾€è¶…ç±»æŸ¥æ‰¾äº†
SubType.prototype.getSuperValue = function (){ 
  return false; 
}; 

//ä½¿ç”¨å­—é¢é‡æ·»åŠ æ–°æ–¹æ³•ï¼Œä¼šå¯¼è‡´æ›¿æ¢åŸå‹ä»£ç æ— æ•ˆ
// å­—é¢é‡èµ‹å€¼ä¼šå¯¼è‡´å­ç±»çš„åŸå‹æ˜¯Objectçš„å®ä¾‹
// å’Œè¶…ç±»æ²¡æœ‰å…³ç³»
SubType.prototype = { 
 getSubValue : function (){ 
 return this.subproperty; 
 }, 
 someOtherMethod : function (){ 
 return false; 
 } 
}; 
```

#### 4.åŸå‹é“¾é—®é¢˜

==æ³¨æ„==å‰é¢çš„ä¾‹å­ä¸­ï¼Œéƒ½æ˜¯æ·»åŠ æˆ–ä¿®æ”¹æ–¹æ³•ï¼Œæ²¡æœ‰æ€ä¹ˆå‡ºç°ä¿®æ”¹**å¼•ç”¨ç±»å‹**å€¼çš„ä¾‹å­ï¼Œå› ä¸º**å¼•ç”¨ç±»å‹**å€¼ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œä¸€ä¸ªå®ä¾‹æ”¹å˜äº†å€¼ï¼Œä¹Ÿä¼šåæ˜ åˆ°å¦å¤–ä¸€ä¸ªå®ä¾‹ä¸Šã€‚

```javascript
function SuperType(){ 
  this.colors = ["red", "blue", "green"]; 
} 
function SubType(){ 
} 
//ç»§æ‰¿äº† SuperType 
SubType.prototype = new SuperType(); 
var instance1 = new SubType(); 
// ä¿®æ”¹å¼•ç”¨ç±»å‹æ•°ç»„çš„å€¼
instance1.colors.push("black"); 
alert(instance1.colors); //"red,blue,green,black" 
var instance2 = new SubType(); 
alert(instance2.colors); //"red,blue,green,black" 
```

è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œä¸èƒ½åœ¨ä¸å½±å“å…¶ä»–å®ä¾‹çš„æƒ…å†µä¸‹ï¼Œå‘è¶…ç±»ä¼ é€’å‚æ•°ã€‚

### 3.2 å€Ÿç”¨æ„é€ å‡½æ•°

ä¸ºäº†è§£å†³**å¼•ç”¨ç±»å‹**å€¼çš„é—®é¢˜ï¼Œä½¿ç”¨å€Ÿç”¨æ„é€ ï¼ˆä¼ªé€ å¯¹è±¡æˆ–ç»å…¸ç»§æ‰¿ï¼‰ã€‚

å­ç±»æ„é€ å‡½æ•°å†…éƒ¨è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ã€‚

==ä¸ºä»€ä¹ˆä½¿ç”¨call/apply==ï¼Œå› ä¸ºæ¯ä¸ªå­ç±»å®ä¾‹éƒ½åº”è¯¥æœ‰è‡ªå·±çš„ï¼Œæ¥è‡ªè¶…ç±»çš„å±æ€§`colors`ï¼Œæ‰€ä»¥ï¼ˆå°†æ¥ï¼‰æ¯æ¬¡è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ï¼Œåº”è¯¥æ˜¯åœ¨å½“å‰å®ä¾‹çš„ç¯å¢ƒä¸‹ã€‚

```javascript
function SuperType(){ 
  this.colors = ["red", "blue", "green"]; 
} 
function SubType(){ 
  //ç»§æ‰¿äº† SuperType 
  SuperType.call(this); 
} 
var instance1 = new SubType(); 
instance1.colors.push("black"); 
alert(instance1.colors); //"red,blue,green,black" 
var instance2 = new SubType(); 
alert(instance2.colors); //"red,blue,green" 
```

å€Ÿç”¨æ„é€ å‡½æ•°å¯ä»¥å‘è¶…ç±»ä¼ é€’å‚æ•°

```javascript
function SuperType(name){ 
  this.name = name; 
} 
function SubType(){ 
  //ç»§æ‰¿äº† SuperTypeï¼ŒåŒæ—¶è¿˜ä¼ é€’äº†å‚æ•°
  SuperType.call(this, "Nicholas"); 
  
  //å®ä¾‹å±æ€§
  this.age = 29; 
} 
var instance = new SubType(); 
alert(instance.name); //"Nicholas"; 
alert(instance.age); //29 
```

==ç¼ºç‚¹==ï¼š

æ‰€æœ‰æ–¹æ³•éƒ½éœ€è¦åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ã€‚

è¶…ç±»åœ¨åŸå‹ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå­ç±»æ˜¯ä¸å¯è§çš„ã€‚å› ä¸ºå®ä¾‹çš„æ˜¯å­ç±»å¯¹è±¡ï¼Œåªæ˜¯å€Ÿç”¨äº†è¶…ç±»çš„æ„é€ å‡½æ•°ï¼Œå·å·å¾—åˆ°äº†è¶…ç±»çš„å±æ€§ï¼Œæ‰€ä»¥å®ä¾‹çš„`[[prototype]]`ä¸æŒ‡å‘è¶…ç±»è€Œæ˜¯æŒ‡å‘å­ç±»çš„åŸå‹å¯¹è±¡ã€‚

### 3.3 ç»„åˆç»§æ‰¿

å°†åŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°çš„æŠ€æœ¯ç»„åˆåœ¨ä¸€å—ã€‚ç”¨åŸå‹é“¾ç»§æ‰¿æ–¹æ³•ï¼Œç”¨å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§ã€‚

```javascript
function SuperType(name){ 
  this.name = name; 
  this.colors = ["red", "blue", "green"]; 
} 
SuperType.prototype.sayName = function(){ 
  alert(this.name); 
}; 
function SubType(name, age){ 
  //ç»§æ‰¿å±æ€§
  SuperType.call(this, name); 
  this.age = age; 
} 
//ç»§æ‰¿æ–¹æ³•
SubType.prototype = new SuperType(); 
SubType.prototype.constructor = SubType; 
SubType.prototype.sayAge = function(){ 
  alert(this.age); 
}; 
var instance1 = new SubType("Nicholas", 29); 
instance1.colors.push("black"); 
alert(instance1.colors); //"red,blue,greeninstance1.sayName(); //"Nicholas"; 
instance1.sayAge(); //29 
var instance2 = new SubType("Greg", 27); 
alert(instance2.colors); //"red,blue,greeninstance2.sayName(); //"Greg"; 
instance2.sayAge(); //27 
```

### 3.4 åŸå‹å¼ç»§æ‰¿

ä½¿ç”¨ä¸€ä¸ªæ¨¡æ¿å¯¹è±¡ï¼Œç»§æ‰¿ï¼Œä¸éœ€è¦æ„é€ å‡½æ•°

```javascript
 // åœ¨objectå‡½æ•°é‡Œé¢å®šä¹‰ä¸€ä¸ªä¸´æ—¶çš„å‡½æ•°
// è¿™ä¸ªä¸´æ—¶å‡½æ•°çš„åŸå‹è¢«å®Œå…¨é‡å†™æˆæ¨¡æ¿å¯¹è±¡
// æœ€åè¿”å›è¿™ä¸ªä¸´æ—¶å‡½æ•°çš„å®ä¾‹ã€‚
// æœ¬è´¨å°±æ˜¯ä¸€æ¬¡æµ…å¤åˆ¶
function object(o){ 
  function F(){} 
  F.prototype = o; 
  return new F(); 
}
// æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯å…±äº«çš„ ä¿®æ”¹ä¸€ä¸ªå°±ä¼šå½±å“å…¶ä»–çš„
```

`Object.creat()`å°±æ˜¯åŸºäºæ­¤

```javascript
var person = { 
  name: "Nicholas", 
  friends: ["Shelby", "Court", "Van"] 
}; 
var anotherPerson = Object.create(person); 
anotherPerson.name = "Greg"; 
anotherPerson.friends.push("Rob"); 
  
var yetAnotherPerson = Object.create(person); 
yetAnotherPerson.name = "Linda"; 
yetAnotherPerson.friends.push("Barbie"); 
alert(person.friends); //"Shelby,Court,Van,Rob,Barbie" 
// ç¬¬äºŒä¸ªå‚æ•°
var anotherPerson = Object.create(person, { 
  name: { 
  	value: "Greg" 
  } 
}) 
```

### 3.5 å¯„ç”Ÿå¼ç»§æ‰¿

```javascript
function createAnother(original){ 
  var clone = object(original); //é€šè¿‡è°ƒç”¨å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡
  clone.sayHi = function(){ //ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºè¿™ä¸ªå¯¹è±¡
  	alert("hi"); 
  }; 
  return clone; //è¿”å›è¿™ä¸ªå¯¹è±¡
} 
```

### 3.6 å¯„ç”Ÿç»„åˆæ¨¡å¼

ç»„åˆç»§æ‰¿æ¨¡å¼æœ‰ä¸ªç¼ºç‚¹ï¼Œéœ€è¦è°ƒç”¨ä¸¤æ¬¡è¶…ç±»æ„é€ å‡½æ•°ï¼Œä¸€æ¬¡æ˜¯å°†è¶…ç±»å®ä¾‹èµ‹å€¼ç»™å­ç±»åŸå‹çš„æ—¶å€™ï¼Œä¸€æ¬¡æ˜¯å­ç±»æ„é€ å‡½æ•°å†…éƒ¨è°ƒç”¨äº†è¶…ç±»æ„é€ å‡½æ•°ã€‚

```javascript
// 1. å¤åˆ¶è¶…ç±»å¯¹è±¡
// 2. ä¿®æ”¹åŸå‹custuctorå±æ€§
// 3. è¶…ç±»åŸå‹èµ‹å€¼ç»™å­ç±» 
// è¿™ä¸‰æ­¥ç›¸å½“äºå®Œæˆäº†ç»„åˆç»§æ‰¿é‡Œé¢çš„subType.prototype = new superType()ï¼Œå‡å°‘äº†ä¸€æ¬¡è¶…ç±»æ„é€ å‡½æ•°è°ƒç”¨ã€‚
function inheritPrototype(subType, superType){ 
  var prototype = object(superType.prototype); //åˆ›å»ºå¯¹åƒ
  prototype.constructor = subType; //å¢å¼ºå¯¹åƒ
  subType.prototype = prototype; //æŒ‡å®šå¯¹åƒ
} 
function SuperType(name){ 
  this.name = name; 
  this.colors = ["red", "blue", "green"]; 
} 
SuperType.prototype.sayName = function(){ 
  alert(this.name); 
}; 
function SubType(name, age){ 
  SuperType.call(this, name); 
  
  this.age = age; 
} 
inheritPrototype(SubType, SuperType); 
SubType.prototype.sayAge = function(){ 
  alert(this.age); 
}; 
```

# âš’ ç¬¬ä¸ƒç«    å‡½æ•°è¡¨è¾¾å¼

------

```javascript
//ä¸è¦è¿™æ ·åšï¼ 
//å¤§å¤šæ•°æµè§ˆå™¨ä¼šè¿”å›ç¬¬äºŒä¸ªå£°æ˜ï¼Œå¿½ç•¥conditionï¼›Firefox ä¼šåœ¨ condition ä¸º true æ—¶è¿”å›ç¬¬ä¸€ä¸ªå£°æ˜
if(condition){ 
  function sayHi(){ 
  alert("Hi!"); 
  } 
} else { 
  function sayHi(){ 
  alert("Yo!"); 
  } 
} 
//å¯ä»¥è¿™æ ·åš
var sayHi; 
if(condition){ 
  sayHi = function() alert("Hi!"); 
  }; 
} else { 
  sayHi = function() alert("Yo!"); 
  }; 
} 
```

## 1. é—­åŒ…

æœ‰æƒè®¿é—®**å¦ä¸€ä¸ª**å‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°

ä¸‹é¢ä»£ç ï¼Œ`createComparisonFunction`é‡Œé¢è¿”å›äº†ä¸€ä¸ªå†…éƒ¨åŒ¿åå‡½æ•°ï¼Œè€Œå†…éƒ¨å‡½æ•°ä½¿ç”¨äº†å¤–éƒ¨å‚æ•°`propertyName`ï¼Œè€Œä¸”æ— è®ºè¿™ä¸ªå†…éƒ¨å‡½æ•°è¢«è¿”å›äº†è¿˜æ˜¯åœ¨å…¶ä»–åœ°æ–¹è¢«è°ƒç”¨äº†ï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‚æ•°`propertyName`ã€‚

å…¶åŸå› ï¼Œå› ä¸ºè¿™ä¸ªå†…éƒ¨å‡½æ•°çš„ä½œç”¨åŸŸä¸­**åŒ…å«**äº†`createComparisonFunction`ä½œç”¨åŸŸã€‚

```javascript
function createComparisonFunction(propertyName)  
  return function(object1, object2){ 
      var value1 = object1[propertyName]; 
      var value2 = object2[propertyName]; 
  	  if (value1 < value2){ 
  		return -1; 
  	  } else if (value1 > value2){ 
  		return 1; 
  	  } else { 
  		return 0; 
      } 
   }; 
} 
```

### 1.1 ä½œç”¨åŸŸé“¾åˆ›å»º å’Œ  ä½œç”¨åŸŸé“¾ç»†èŠ‚

æŸä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼š

1.  åˆ›å»º`æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼‰`å’Œç›¸åº”`ä½œç”¨åŸŸé“¾`
2.  ä½¿ç”¨`arguments`å’Œå…¶ä»–`å‘½åå‚æ•°`çš„å€¼æ¥åˆå§‹åŒ–å‡½æ•°çš„`æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰`
3.  åœ¨`ä½œç”¨åŸŸé“¾`ä¸­**å¤–éƒ¨**å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡å¤„äºç¬¬äºŒä½ï¼Œå¤–éƒ¨çš„å¤–éƒ¨å‡½æ•°æ´»åŠ¨å¯¹è±¡å¤„äºç¬¬ä¸‰ä½.....ç›´åˆ°å…¨å±€ä½œç”¨ç¯å¢ƒ

==ä¾‹1ï¼š==

```
å‡å¦‚æœ‰ä¸ªå‡½æ•°`compare()`ï¼Œåœ¨å…¨å±€çš„ç¯å¢ƒä¸­è°ƒç”¨å®ƒï¼Œä½œç”¨åŸŸé“¾å¦‚ä¸‹å›¾

```

![1537319520787](E:\åŸ¹è®­\ç¬”è®°å›¾\å‡½æ•°ä½œç”¨åŸŸé“¾1.png)

1.  å¦‚ä¸Šæ–‡æ‰€è¯´ï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œç¯å¢ƒ`compareçš„æ‰§è¡Œç¯å¢ƒ`å’Œä¸€ä¸ª`ä½œç”¨åŸŸé“¾`
2.  å…¶ä¸­`ä½œç”¨åŸŸé“¾`åœ¨**åˆ›å»ºçš„æ—¶å€™**å°±æœ‰åŒ…å«`å…¨å±€å˜é‡å¯¹è±¡`ï¼Œè¿™ä¸ªåˆå§‹å¯¹è±¡å­˜åœ¨`[[Scope]]`å±æ€§ä¸­ï¼Œå½“**è°ƒç”¨å‡½æ•°æ—¶**å¤åˆ¶`[[Scope]]`é‡Œçš„å¯¹è±¡æ„å»ºèµ·å½“å‰æ‰§è¡Œç¯å¢ƒçš„ä½œç”¨åŸŸé“¾ã€‚
3.  ç„¶ååˆ›å»ºä¸€ä¸ª`æ´»åŠ¨å¯¹è±¡`ï¼Œè¢«æ¨å…¥ä½œç”¨åŸŸé“¾å‰ç«¯ã€‚
4.  ä½œç”¨åŸŸé“¾å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆåˆ—è¡¨ï¼Œä¸åŒ…å«ä»»ä½•å¯¹è±¡ã€‚
5.  è®¿é—®å˜é‡çš„æ—¶å€™ä»ä½œç”¨åŸŸé“¾æœç´¢ï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•åå±€éƒ¨æ´»åŠ¨å¯¹è±¡å°±è¢«é”€æ¯ã€‚

==ä¾‹2ï¼š==

```
ä»¥ä¸Šæ–‡`createComparisonFunction()`å‡½æ•°ä¸ºä¾‹ï¼Œä¸€ä¸ª`å†…éƒ¨å‡½æ•°`ä¼šå°†`å¤–éƒ¨å‡½æ•°`çš„æ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°å®ƒçš„ä½œç”¨åŸŸä¸­ï¼Œæ‰€ä»¥`createComparisonFunction()`é‡Œçš„åŒ¿åå‡½æ•°å°†åŒ…å«`createComparisonFunction()`çš„æ´»åŠ¨å¯¹è±¡ã€‚

```

![1537323757952](E:\åŸ¹è®­\ç¬”è®°å›¾\é—­åŒ…ä½œç”¨åŸŸé“¾.png)

1.  é¦–å…ˆ`createComparisonFunction()`åˆ›å»ºçš„ä½œç”¨åŸŸé“¾è¿‡ç¨‹å’Œä¾‹1ä¸€æ ·

2.  é‡Œé¢çš„åŒ¿åå‡½æ•°å°†åŒ…å«å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯`createComparisonFunction()`çš„`æ´»åŠ¨å¯¹è±¡`æ·»åŠ åˆ°è‡ªå·±çš„ä½œç”¨åŸŸé“¾é‡Œé¢ï¼Œä½ç½®åœ¨è‡ªå·±çš„æ´»åŠ¨å¯¹è±¡ä¹‹åï¼Œå…¨å±€å¯¹è±¡ä¹‹å‰ã€‚

3.  å½“`createComparisonFunction()`è¿”å›æ—¶ï¼Œä¹Ÿå°±æ˜¯å®ƒæ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå› ä¸ºå†…éƒ¨å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯åŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä»ç„¶è¿æ¥ç€`createComparisonFunction()`çš„æ´»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥`createComparisonFunction()`çš„æ´»åŠ¨å¯¹è±¡å¹¶ä¸ä¼šè¢«é”€æ¯

    ```javascript
    //åˆ›å»ºå‡½æ•°
    var compareNames = createComparisonFunction("name"); 
    //è°ƒç”¨å‡½æ•°
    var result = compareNames({ name: "Nicholas" }, { name: "Greg" }); 
    //è§£é™¤å¯¹åŒ¿åå‡½æ•°çš„å¼•ç”¨ï¼ˆä»¥ä¾¿é‡Šæ”¾å†…å­˜ï¼‰
    compareNames = null; 
    ```

### 1.2 é—­åŒ…ä¸å˜é‡

é—­åŒ…æ‰€ä¿å­˜çš„æ˜¯`å˜é‡å¯¹è±¡`è€Œä¸æ˜¯æŸä¸ªç‰¹å®šçš„å˜é‡ï¼Œå¦‚ä¸‹ä»£ç 

```javascript
function createFunctions(){ 
  var result = new Array(); 
  for (var i=0; i < 10; i++){ 
      result[i] = function(){ 
      return i; }; 
  } 
  return result; 
} 
// æœŸæœ›è¾“å‡ºçš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½ç½® 0 çš„å‡½æ•°è¿”å› 0ï¼Œä½ç½® 1 çš„å‡½æ•°è¿”å› 1ï¼Œä»¥æ­¤ç±»æ¨
```

äº‹å®ä¸Šå¹¶ä¸èƒ½è¾¾åˆ°é¢„æœŸï¼Œå¦‚ä¸ŠèŠ‚æ‰€æè¿°çš„ï¼Œ**æ¯ä¸ªå†…éƒ¨å‡½æ•°**ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„åŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸé“¾é‡Œé¢**éƒ½åŒ…å«å¤–éƒ¨å‡½æ•°**çš„æ´»åŠ¨å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªåŒ¿åå‡½æ•°éƒ½åŒ…å«ç€åŒä¸€ä¸ªä¹Ÿå°±æ˜¯`createFunctions()`çš„æ´»åŠ¨å¯¹è±¡ï¼Œæˆ–è€…è¯´æ˜¯å®ƒçš„**æ‰€æœ‰å˜é‡**ï¼Œæ‰€ä»¥å½“å¾ªç¯å®Œæˆåï¼Œéƒ½åªèƒ½è¾“å‡º`10`

```javascript
// ä½¿ç”¨ç«‹å³æ‰§è¡Œé—­åŒ…å‡½æ•°å¹¶å°†å½“æ—¶çš„å˜é‡iä¼ å…¥ï¼Œå°±èƒ½æ­£ç¡®è¿”å›
function createFunctions(){ 
    var result = new Array(); 
    for (var i=0; i < 10; i++){ 
        result[i] = function(num){ 
            return num
        }(i);
    } 
    return result; 
} 
```

### 1.3  `this`å¯¹è±¡

```
`this`æ˜¯åŸºäºå‡½æ•°æ‰§è¡Œç¯å¢ƒç»‘å®šçš„ã€‚è€ŒåŒ¿åå‡½æ•°é€šå¸¸æŒ‡å‘`window`ï¼Œè€Œé—­åŒ…ä¼šæœ‰ç‚¹ä¸åŒã€‚

```

```javascript
var name = "The Window"; // å…¨å±€å˜é‡name
var object = { 
  name : "My Object", // å¯¹è±¡å±æ€§name
  getNameFunc : function(){ 
  	return function(){ 
  		return this.name; 
  	}; 
  } 
}; 
alert(object.getNameFunc()()); //"The Window"ï¼ˆåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰
```

```
ä¹‹æ‰€ä»¥è¾“å‡ºçš„æ˜¯å…¨å±€å˜é‡ï¼Œ

```

1.  æ¯ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨å–å¾—ä¸¤ä¸ªå˜é‡`this`å’Œ`arguments`
2.  å–å¾—çš„è¿‡ç¨‹å°±æ˜¯æŒ‰ç…§å‰å‡ èŠ‚æ‰€å™è¿°çš„ä½œç”¨åŸŸé“¾é¡ºåºæœç´¢
3.  æŒ‰ç…§ä¹‹å‰çš„æè¿°ï¼Œä½œç”¨åŸŸé“¾æœ€å‰ç«¯æ˜¯å‡½æ•°è‡ªå·±çš„æ´»åŠ¨å¯¹è±¡
4.  æ‰€ä»¥è¿™é‡Œçš„åŒ¿åå‡½æ•°æœ€å…ˆæœç´¢åˆ°çš„`this`æ˜¯è‡ªå·±çš„æ´»åŠ¨å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘å…¨å±€çš„`this`

```javascript
var name = "The Window"; 
var object = { 
 name : "My Object", 
 getNameFunc : function(){ 
    var that = this; // ä¿å­˜å¤–éƒ¨å‡½æ•°çš„this
  	return function(){ 
 		 return that.name; // å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„this
  	}; 
  } 
}; 
alert(object.getNameFunc()()); //"My Object" 
```

```
è¿™é‡Œçš„ä¸»è¦æ“ä½œæ—¶å°†å¤–éƒ¨å‡½æ•°çš„`this`ä¿å­˜ï¼Œé—­åŒ…ä½¿ç”¨äº†å¤–éƒ¨å‡½æ•°çš„`this`

å› ä¸ºå†…éƒ¨å‡½æ•°ï¼Œè¿™é‡Œçš„é—­åŒ…åŒ…å«äº†å¤–éƒ¨å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥èƒ½è®¿é—®å˜é‡`that`ã€‚

`this`å€¼æœ‰æ—¶ä¼šæ„å¤–çš„å‘ç”Ÿæ”¹å˜

```

```javascript
var name = "The Window"; 
var object = { 
  name : "My Object", 
  getName: function(){ 
      return this.name; 
  } 
}; 
object.getName(); //"My Object" 
(object.getName)(); //"My Object" ()()å®šä¹‰å’Œobject.getName()ç›¸åŒ
(object.getName = object.getName)(); //"The Window"ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹
// å› ä¸ºèµ‹å€¼æ˜¯å‡½æ•°æœ¬èº«
```

### 1.4 é—­åŒ…å¯¼è‡´å†…å­˜æ³„éœ²

åœ¨`IE9`ä¹‹å‰å¯¹`jså¯¹è±¡`å’Œ`COMå¯¹è±¡`ä½¿ç”¨ä¸åŒçš„åƒåœ¾æ”¶é›†ä¾‹ç¨‹ï¼Œæ‰€ä»¥å¦‚æœé—­åŒ…ä½œç”¨åŸŸé“¾é‡Œé¢ä¿å­˜ç€ä¸€ä¸ª`HTML`å…ƒç´ ï¼Œé‚£ä¹ˆè¯¥å…ƒç´ å°†æ— æ³•è¢«é”€æ¯ã€‚

```javascript
function assignHandler(){ 
  var element = document.getElementById("someElement"); 
  element.onclick = function(){ 
      alert(element.id); 
  }; 
} // å› ä¸ºé—­åŒ…åˆ›å»ºäº†ä¸€ä¸ªå¾ªç¯å¼•ç”¨ï¼ŒåŒ¿åå‡½æ•°åˆåŒ…å«ç€assignHandlerçš„æ´»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥åªè¦åŒ¿åå‡½æ•°å­˜åœ¨å°±æ°¸è¿œä¸ä¼šè¢«å›æ”¶
```

```javascript
// ä½¿ç”¨ç¬¬å››è¡Œä»£ç æ¶ˆé™¤å¾ªç¯å¼•ç”¨
// ä½¿ç”¨ç¬¬åä¸€è¡Œæ¶ˆé™¤æ´»åŠ¨å¯¹è±¡ä¸­å¯¹htmlå…ƒç´ çš„å¼•ç”¨
// å› ä¸ºé—­åŒ…åŒ…å«ç€å¤–éƒ¨å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡
function assignHandler(){ 
  var element = document.getElementById("someElement"); 
  var id = element.id; 
  
  element.onclick = function(){ 
  	alert(id); 
  }; 
  
  element = null; 
} 
```

## 2. æ¨¡ä»¿å—çº§ä½œç”¨åŸŸ

```
`JS`ä¸­æ²¡æœ‰å—çº§ä½œç”¨åŸŸçš„æ¦‚å¿µï¼Œå¦‚åœ¨`for`å¾ªç¯å¤–ä¹Ÿå¯ä»¥è®¿é—®å¾ªç¯å˜é‡ã€‚å¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°æ¥æ¨¡ä»¿å—çº§ä½œç”¨åŸŸã€‚

```

```javascript
(function(){ 
  //è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ
})();

// ç›¸å½“äº
let xx = function() {
    //è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ
};
xx();
// å‡½æ•°è°ƒç”¨æ— éå°±æ˜¯å‡½æ•°åè·Ÿç€ä¸€å¯¹æ‹¬å·ï¼Œè€Œå‡½æ•°åä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å€¼ä¹Ÿå°±æ˜¯å³ä¾§ä»£æ›¿ï¼Œä½†æ˜¯ç›´æ¥ä½¿ç”¨ä¼šå‡ºé”™ï¼Œæ‰€ä»¥ç”¨æ‹¬å·åŒ…è£¹è½¬åŒ–ä¸€ä¸‹
```

```javascript
function outputNumbers(count){ 
      (function () { 
          for (var i=0; i < count; i++){ 
            alert(i); 
          } 
      })(); 
  alert(i); //å¯¼è‡´ä¸€ä¸ªé”™è¯¯
} 
```

```
è¿™é‡Œä½¿ç”¨ç«‹å³æ‰§è¡Œçš„åŒ¿åå‡½æ•°åŒ…è£¹`for`å¾ªç¯ï¼Œå› ä¸ºå‡½æ•°æ‰§è¡Œå®Œæˆåä¼šé”€æ¯è‡ªå·±çš„`å±€éƒ¨æ´»åŠ¨å¯¹è±¡`ï¼Œæ‰€ä»¥å½“è¿™é‡Œé¢çš„å¾ªç¯ç»“æŸåï¼Œå¤–é¢æ— æ³•è®¿é—®é‡Œé¢çš„å˜é‡ï¼Œè€Œåˆä»¥ä¸ºè¿™ä¸ªåŒ¿åå‡½æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œä½œç”¨åŸŸåŒ…å«äº†å¤–éƒ¨å‡½æ•°`outputNumbers`çš„æ´»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥èƒ½è®¿é—®å˜é‡`count`

```

## 3. ç§æœ‰å˜é‡

ä»»ä½•åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ï¼Œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç§æœ‰å˜é‡ï¼Œå› ä¸ºä¸èƒ½åœ¨å‡½æ•°çš„å¤–éƒ¨è®¿é—®è¿™äº›å˜é‡ã€‚ç§æœ‰å˜é‡åŒ…æ‹¬å‡½æ•°çš„å‚æ•°ã€å±€éƒ¨å˜é‡å’Œåœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å…¶ä»–å‡½æ•°ã€‚

æŠŠ**æœ‰æƒè®¿é—®**ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°çš„å…¬æœ‰æ–¹æ³•ç§°ä¸º**ç‰¹æƒæ–¹æ³•**`privileged method`ï¼Œæœ‰ä¸¤ç§æ–¹æ³•

```javascript
function MyObject(){ 
  //ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°
  var privateVariable = 10; 
  function privateFunction(){ 
 	 return false; 
  } 
  //ç‰¹æƒæ–¹æ³•
  this.publicMethod = function (){ 
  	privateVariable++; 
 	 return privateFunction(); 
  }; 
} 
//å˜é‡ privateVariable å’Œå‡½æ•° privateFunction()åªèƒ½é€šè¿‡ç‰¹æƒæ–¹æ³• publicMethod()æ¥è®¿é—®

function Person(name){ 
  this.getName = function(){ 
  	return name; 
  }; 
  this.setName = function (value) { 
  	name = value; 
  }; 
} 
var person = new Person("Nicholas"); 
alert(person.getName()); //"Nicholas" 
person.setName("Greg"); 
alert(person.getName()); //"Greg" 
```

==ç¼ºç‚¹==ï¼š

åƒä¸Šé¢ä»£ç ä¸€æ ·ä½¿ç”¨æ„é€ å‡½æ•°æ¥å®šä¹‰ç‰¹æƒæ–¹æ³•ï¼Œæœ‰ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯æ¯æ¬¡å®ä¾‹åŒ–çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ç»„æ–°çš„æ–¹æ³•ï¼Œå› ä¸ºå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ã€‚

### 3.1 é™æ€ç§æœ‰å˜é‡

```
ä¸ºäº†è§£å†³æ„é€ å‡½æ•°å®šä¹‰ç‰¹æƒæ–¹æ³•çš„é—®é¢˜ã€‚åœ¨`ç§æœ‰ä½œç”¨åŸŸ`ä¸­å®šä¹‰ç§æœ‰å‡½æ•°å’Œå˜é‡

```

```javascript
(function(){ 
  //ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°
  var privateVariable = 10; 
  function privateFunction(){ 
  	return false; 
  } 
  //æ„é€ å‡½æ•°
  MyObject = function(){ 
  }; 
  //å…¬æœ‰/ç‰¹æƒæ–¹æ³•
  MyObject.prototype.publicMethod = function(){ 
  	privateVariable++; 
  	return privateFunction(); 
  }; 
})(); 
```

è¿™ä¸ªæ¨¡å¼ä¸­ï¼š

1.  åˆ›å»ºäº†ä¸€ä¸ªç§æœ‰ä½œç”¨åŸŸï¼Œç„¶åå®šä¹‰äº†ç§æœ‰å±æ€§ã€‚
2.  ç¬¬å…«è¡Œå®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¹¶ä½¿ç”¨åŸå‹æ¨¡å¼å®šä¹‰äº†ç‰¹æƒæ–¹æ³•ï¼Œæ³¨æ„è¿™é‡Œçš„æ„é€ å‡½æ•°æ²¡æœ‰ä½¿ç”¨`var`ï¼Œç›®çš„æ˜¯è®©å®ƒæˆä¸ºå…¨å±€å˜é‡ï¼Œæ–¹ä¾¿å¤–éƒ¨è®¿é—®ç§æœ‰å±æ€§ã€‚
3.  æœ‰ä¸€ä¸ªå®ä¾‹æ”¹å˜äº†å±æ€§ï¼Œæ‰€æœ‰å®ä¾‹éƒ½ä¼šä½“ç°

### 3.2  æ¨¡å—æ¨¡å¼

```
ä¸»è¦æ˜¯é’ˆå¯¹å•ä¾‹åˆ›å»ºç§æœ‰å˜é‡å’Œç‰¹æƒæ–¹æ³•ï¼Œå•ä¾‹å°±æ˜¯åªæœ‰ä¸€ä¸ªå®ä¾‹çš„å¯¹è±¡ã€‚

```

```javascript
// å…¸å‹çš„å•ä¾‹ å­—é¢é‡åˆ›å»ºçš„å¯¹è±¡
var singleton = { 
 name : value, 
 method : function () { 
 	//è¿™é‡Œæ˜¯æ–¹æ³•çš„ä»£ç 
 	} 
}; 
// æ¨¡å—æ¨¡å¼
var singleton = function(){  
  //ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°
  var privateVariable = 10; 
  
  function privateFunction(){ 
 	 return false; 
  } 
 //ç‰¹æƒ/å…¬æœ‰æ–¹æ³•å’Œå±æ€§
// è¿”å›çš„å°±æ˜¯ä¸€ä¸ªå•ä¾‹
 return { 
 	publicProperty: true, 
 	publicMethod : function(){ 
 		privateVariable++; 
 		return privateFunction(); 
 	} 
 }; 
}(); 
```

ä¸Šé¢çš„ä»£ç ï¼Œåˆ›å»ºäº†ä¸€ä¸ªåŒ¿åå‡½æ•°å†…éƒ¨æœ‰ç§æœ‰å˜é‡å’Œå‡½æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªå­—é¢é‡å¯¹è±¡ï¼ŒåŒ…å«å…¬å¼€çš„å˜é‡å’Œæ–¹æ³•ã€‚

è¿™ç§æ–¹æ³•å¯¹äºï¼Œéœ€è¦å¯¹å•ä¾‹è¿›è¡ŒæŸäº›åˆå§‹åŒ–ï¼ŒåŒæ—¶åˆéœ€è¦ç»´æŠ¤å…¶ç§æœ‰å˜é‡æ—¶éå¸¸æœ‰ç”¨ã€‚

```javascript
// ä½¿ç”¨ä¾‹å­
var application = function(){ 
  //ç§æœ‰å˜é‡å’Œå‡½æ•°
  var components = new Array(); 
  //åˆå§‹åŒ–
  components.push(new BaseComponent()); 
  //å…¬å…±
  return { 
  	getComponentCount : function(){ 
  		return components.length; 
  	}, 
  	registerComponent : function(component){ 
  		if (typeof component == "object"){ 
  			components.push(component); 
 	 	} 
  	} 
  }; 
}(); 
```

å¦‚æœéœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œåˆå§‹åŒ–åŒæ—¶éœ€è¦ä¸€äº›å…¬å¼€ä¸”èƒ½å¤Ÿè®¿é—®è¿™äº›ç§æœ‰æ•°æ®çš„æ–¹æ³•ï¼Œå°±å¯ä»¥ä½¿ç”¨æ¨¡å—æ¨¡å¼ã€‚

### 3.3 å¢å¼ºæ¨¡å—æ¨¡å¼

å•ä¾‹å¿…é¡»æ˜¯æŸç§ç±»å‹çš„å®ä¾‹ï¼ŒåŒæ—¶è¿˜å¿…é¡»æ·»åŠ æŸäº›å±æ€§å’Œï¼ˆæˆ–ï¼‰æ–¹æ³•å¯¹å…¶åŠ ä»¥å¢å¼ºçš„æƒ…å†µ

```javascript
var application = function(){ 
  //ç§æœ‰å˜é‡å’Œå‡½æ•°
  var components = new Array(); 
  //åˆå§‹åŒ–
  components.push(new BaseComponent()); 
  //åˆ›å»º application çš„ä¸€ä¸ªå±€éƒ¨å‰¯æœ¬
  var app = new BaseComponent(); 
  //å…¬å…±æ¥å£
  app.getComponentCount = function(){ 
  	return components.length; 
  }; 
  app.registerComponent = function(component){ 
  	if (typeof component == "object"){ 
  		components.push(component); 
  	} 
  }; 
  //è¿”å›è¿™ä¸ªå‰¯æœ¬
     return app; 
}(); 
```

# 